<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1" />
<meta name="Date" content="2009-09-09T22:35:15Z" />
<meta name="doctitle" content="Oracle&reg; Database 2 Day DBA 11g Release 2 (11.2)" />
<meta name="partno" content="E10897-02" />
<meta name="docid" content="ADMQS" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="problems.htm" title="Previous" type="text/html" />
<link rel="Next" href="asm.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10897.pdf" title="PDF version" type="application/pdf" />
<title>Managing Oracle Database Software</title>
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Database 2 Day DBA<br />
11<i>g</i> Release 2 (11.2)</b><br />
Part Number E10897-02</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="problems.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="asm.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e10897.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="CHDBJFDC" name="CHDBJFDC"></a><a id="ADMQS1100" name="ADMQS1100"></a>
<h1 class="chapter"><span class="secnum">12</span> Managing Oracle Database Software</h1>
<p>This chapter describes how to keep your Oracle Database software up-to-date with patch and software releases. This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#g1012444">About Software Management and Patch Releases</a></p>
</li>
<li>
<p><a href="#g1086288">Patching the Oracle Software</a></p>
</li>
<li>
<p><a href="#BABCGAJE">Viewing Critical Patch Advisories</a></p>
</li>
<li>
<p><a href="#CIHHCEHC">Upgrading a Database</a></p>
</li>
<li>
<p><a href="#CACJFCDZ">Managing Oracle Software: Oracle By Example Series</a></p>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The steps described in this chapter require a license for the Enterprise Manager Provisioning Management pack. Refer to the <a class="olink DBLIC" href="http://www.oracle.com/pls/db112/lookup?id=DBLIC"><span class="italic">Oracle Database Licensing Information</span></a> for information about the availability of these features on your system.</div>
<a id="g1012444" name="g1012444"></a><a id="ADMQS111" name="ADMQS111"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Software Management and Patch Releases</h2>
<p><a id="sthref773" name="sthref773"></a><a id="sthref774" name="sthref774"></a>Software management involves keeping your Oracle Database software up-to-date with the latest product fixes. When a product defect, or a <span class="bold">bug</span>, is discovered, a patch is created to fix the problem. A <span class="bold">patch</span> corrects a single defect in the installed software. Individual patches, also referred to as <span class="bold">interim patches</span>, are made available to customers who for business reasons cannot wait until the next patch set to receive the product fix.</p>
<p>Oracle periodically issues maintenance releases for its software, in the form of patch sets. A <span class="bold">patch set</span> is a collection of product fixes that have been released up to the time of the maintenance release. Patch sets are fully tested and integrated product fixes. All the product fixes in the patch set have been tested and are certified to work with each other.</p>
<p>Every patch or patch set is associated with a bug number for identification purposes. Patch sets are also associated with version numbers. For example, if you use Oracle Database 11<span class="italic">g</span> Release 11.1.0.6, then an available patch set might be 11.1.0.7. The version number of the patched software does not change if an interim patch is applied.</p>
<p>Every patch has an associated README file that describes how it fixes the software. The README file also has instructions for applying the patch.</p>
<p>Every patch set is accompanied by a Patch Set Notes file that contains installation instructions and information about the product fixes contained within the patch set. When you apply a patch set to your Oracle software, you change the maintenance release number for your installed software. Applying a patch set affects the software residing in your Oracle home only, with no change to the data in the database.</p>
<p>You can use Oracle Enterprise Manager Database Control to automate the staging and application of Oracle patches and patch sets. Database Control stages an Oracle patch by downloading it from the My Oracle Support Web site and copying it to a directory on the server.</p>
</div>
<!-- class="sect1" -->
<a id="g1086288" name="g1086288"></a><a id="ADMQS112" name="ADMQS112"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Patching the Oracle Software</h2>
<p>The steps involved in patching the Oracle software are as follows:</p>
<ul>
<li>
<p><a href="#g1012460">Determining Your Oracle Database Environment</a></p>
</li>
<li>
<p><a href="#g1085244">Setting Your My Oracle Support Credentials</a></p>
</li>
<li>
<p><a href="#BABGJDJA">Configure the Software Library</a></p>
</li>
<li>
<p><a href="#g1085253">Staging and Applying Patches and Patch Sets</a></p>
</li>
</ul>
<a id="g1012460" name="g1012460"></a><a id="ADMQS1121" name="ADMQS1121"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Determining Your Oracle Database Environment</h3>
<p>To select the appropriate patch set release for your environment, you must know the following details about your Oracle environment:</p>
<ul>
<li>
<p>Oracle Database version</p>
</li>
<li>
<p>Oracle home location</p>
</li>
<li>
<p>Hardware configuration</p>
</li>
</ul>
<a id="ADMQS12267" name="ADMQS12267"></a>
<p class="subhead2">To determine the Oracle Database version:</p>
<ul>
<li>
<p>In the General section of the Database Home page, view the version number.</p>
</li>
</ul>
<img width="320" height="213" src="img/general_11g.gif" alt="Description of general_11g.gif follows" title="Description of general_11g.gif follows" longdesc="img_text/general_11g.htm" /><br />
<a id="sthref775" name="sthref775" href="img_text/general_11g.htm">Description of the illustration general_11g.gif</a><br />
<br />
<a id="ADMQS12268" name="ADMQS12268"></a>
<p class="subhead2">To determine the location of your Oracle home:</p>
<ul>
<li>
<p>In the General section of the Database Home page, click <span class="bold">View All Properties</span>.</p>
<p>The View All Properties page appears. This page displays the path to your Oracle home.</p>
</li>
</ul>
<a id="ADMQS12269" name="ADMQS12269"></a>
<p class="subhead2">To view information about your hardware configuration:</p>
<ol>
<li>
<p>In the General section of the Database Home page, click the name of your <span class="bold">Host</span>.</p>
<p>The Host page appears.</p>
<p>This page displays the following information about your hardware configuration:</p>
<ul>
<li>
<p>Operating system</p>
</li>
<li>
<p>Hardware platform</p>
</li>
<li>
<p>IP address</p>
</li>
<li>
<p>Number of CPUs</p>
</li>
<li>
<p>Memory size (MB)</p>
</li>
<li>
<p>Local file system (GB)</p>
</li>
</ul>
</li>
<li>
<p>In the Configuration section, click the links to drill down to pages that describe your operating system, hardware platform, and local file system in more detail.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="g1085244" name="g1085244"></a><a id="ADMQS1122" name="ADMQS1122"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Setting Your My Oracle Support Credentials</h3>
<p>You can obtain patches and patch sets from My Oracle Support (formerly Oracle<span class="italic">MetaLink</span> at the following URL:</p>
<p><code><a href="https://metalink.oracle.com">https://metalink.oracle.com</a></code></p>
<p>To download patches and patch sets from My Oracle Support, you must register using your customer support identifier, which your company obtains when it signs a support contract with Oracle. When you register with My Oracle Support, you are given a user name and password that enables you to log in to this site from a Web browser.</p>
<p>Before you begin using the patching features of Database Control, you must configure your My Oracle Support credentials. After you specify your My Oracle Support credentials, an automated process can search My Oracle Support every day for patches that are applicable to your installed software. You also receive notification about critical patch advisories.</p>
<a id="ADMQS12270" name="ADMQS12270"></a>
<p class="subhead2">To set your My Oracle Support login credentials:</p>
<ol>
<li>
<p>Click the <span class="bold">Setup</span> link located at the top and bottom of most Database Control pages.</p>
<p>The Setup page appears.</p>
</li>
<li>
<p>Click <span class="bold">Patching Setup</span>.</p>
<p>The Patching Setup subpage appears.</p>
</li>
<li>
<p>Under My Oracle Support, enter a user name and password.</p>
</li>
<li>
<p>(Optional) Complete the following steps:</p>
<ol>
<li>
<p>At the top of the page, click <span class="bold">Online and Offline Settings</span>.</p>
</li>
<li>
<p>Enter the maximum size of your patch cache in the <span class="bold">Patch Cache Maximum Size (MB)</span> field.</p>
<p>The patch cache is a temporary area where patches are stored. When the patch cache exceeds the specified maximum size, Database Control automatically performs a purge operation and tries to delete old patches until the patch cache is smaller than the specified maximum size.</p>
</li>
</ol>
</li>
<li>
<p>Click <span class="bold">Apply</span> to set your My Oracle Support credentials.</p>
<p>Database Control displays a message that confirms the setup and informs you that two jobs have been automatically created and scheduled to update your Software Library:</p>
<ul>
<li>
<p>Refresh From Metalink</p>
</li>
<li>
<p>OPatch Update</p>
</li>
</ul>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You might see an error regarding the Software Library not being configured. This error can be ignore and the configuration is completed in the next section.</div>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABGJDJA" name="BABGJDJA"></a><a id="ADMQS12372" name="ADMQS12372"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configure the Software Library</h3>
<p><a id="sthref776" name="sthref776"></a><a id="sthref777" name="sthref777"></a><a id="sthref778" name="sthref778"></a>Before you can stage or apply patches using Enterprise Manager, you must configure the software library. When configuring the Software Library you specify the directory paths that the software library uses to store binary data, such as patches.</p>
<a id="ADMQS12373" name="ADMQS12373"></a>
<p class="subhead2">To configure the Software Library before using the Patch Interface of Database Control:</p>
<ol>
<li>
<p>On the Database Home page in DB Control, click <span class="bold">Software and Support</span>.</p>
</li>
<li>
<p>In the Deployment Procedure Manager section, click the <span class="bold">Deployment and Provisioning Software Library</span> link.</p>
<p>The Provisioning page appears.</p>
</li>
<li>
<p>Click the link for the <span class="bold">Administration</span> subpage.</p>
</li>
<li>
<p>Scroll down to the Software Library Configuration section at the bottom of the page. Click <span class="bold">Add</span>.</p>
<p>The Add Software Library Location page appears.</p>
</li>
<li>
<p>In the Software Library directory location field, enter the name of the directory where the patches are stored on the node, for example, <code>/home/oracle</code>. Click <span class="bold">OK</span>.</p>
<p><a id="sthref779" name="sthref779"></a><a id="sthref780" name="sthref780"></a><a id="sthref781" name="sthref781"></a>A progress window appears indicating that Provisioning Archive (PAR) files are being uploaded. PAR files contain procedures, directives, and components related to deployment procedures, or a series of steps that accomplish a particular task. The PAR files being uploaded now contain best practices advocated by Oracle.</p>
</li>
<li>
<p>When this action completes, you have completed the Software Library configuration.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="g1085253" name="g1085253"></a><a id="ADMQS1123" name="ADMQS1123"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Staging and Applying Patches and Patch Sets</h3>
<p><a id="sthref782" name="sthref782"></a><a id="sthref783" name="sthref783"></a>Applying a patch or patch set is the process of installing the <span class="italic">staged</span>, or locally stored, patch files in the Oracle home on the server. You must specify patching credentials before you can stage and apply a patch or patch set using Enterprise Manager.</p>
<a id="ADMQS12271" name="ADMQS12271"></a>
<p class="subhead2">To stage and apply patches and patch sets using the Patching wizard:</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Software and Support</span>.</p>
<p>The Database Instance: <span class="italic">instance_name</span> page appears.</p>
<img width="766" height="322" src="img/software_page.gif" alt="Description of software_page.gif follows" title="Description of software_page.gif follows" longdesc="img_text/software_page.htm" /><br />
<a id="sthref784" name="sthref784" href="img_text/software_page.htm">Description of the illustration software_page.gif</a><br />
<br /></li>
<li>
<p>In the Database Software Patching section, select <span class="bold">Apply Patch</span>.</p>
<p>The Select Patches page appears.</p>
</li>
<li>
<p>Click <span class="bold">Add Patches</span> to search for new patches to apply.</p>
<p>The Search and Select Patches page appears.</p>
</li>
<li>
<p>Choose the option Search My Oracle Support. In the Search section, accepts the default values for Product Family, Product, Release, and Patch Type. From the Platform list choose the name that matches your installed operating system, for example, <span class="bold">Linux x86</span>. After you have made your selections, click <span class="bold">Go</span>.</p>
<p>You can optionally limit your search further by choosing different values for <span class="bold">Product Family, Product, Patch Type,</span> and <span class="bold">Language</span>, and then clicking <span class="bold">Go</span>.</p>
<p>The available patches table at the bottom of the page is populated with the patches that satisfy your search criteria.</p>
</li>
<li>
<p>(Optional) Select a patch or patch set and click <span class="bold">View</span> to view the patch details.</p>
<img width="904" height="454" src="img/patch_select2.gif" alt="Description of patch_select2.gif follows" title="Description of patch_select2.gif follows" longdesc="img_text/patch_select2.htm" /><br />
<a id="sthref785" name="sthref785" href="img_text/patch_select2.htm">Description of the illustration patch_select2.gif</a><br />
<br /></li>
<li>
<p>Select a patch or patch set and start the Patching wizard by clicking <span class="bold">Select</span> in the top right corner of the page.</p>
<p>The first page of the Patching wizard, the Select Patches page, appears.</p>
</li>
<li>
<p>If the patch or patch set you selected in Step 6 does not appear in the Patches table, then click <span class="bold">Add Patch</span> and repeat the search to locate the patch. When the patch or patch set you have selected is displayed in the Patches table, click <span class="bold">Next</span>.</p>
<img width="741" height="467" src="img/patch_wizard_1a.gif" alt="Description of patch_wizard_1a.gif follows" title="Description of patch_wizard_1a.gif follows" longdesc="img_text/patch_wizard_1a.htm" /><br />
<a id="sthref786" name="sthref786" href="img_text/patch_wizard_1a.htm">Description of the illustration patch_wizard_1a.gif</a><br />
<br />
<p>The Credentials and Schedule page appears.</p>
</li>
<li>
<p>Enter the credentials for the operating system user that is performing the patching operation. If you have configured Preferred Credentials, then you can choose the <span class="bold">Use Preferred</span> option.</p>
<p>For the <span class="bold">Schedule Type</span> option, use the default value of <span class="bold">One Time (Immediately)</span>. Optionally, you can choose to schedule the patching for a later time using the One Time (Later) option. Click <span class="bold">Next</span> to continue.</p>
<img width="702" height="405" src="img/patch_wizard_2.gif" alt="Description of patch_wizard_2.gif follows" title="Description of patch_wizard_2.gif follows" longdesc="img_text/patch_wizard_2.htm" /><br />
<a id="sthref787" name="sthref787" href="img_text/patch_wizard_2.htm">Description of the illustration patch_wizard_2.gif</a><br />
<br />
<p>The Review page appears.</p>
</li>
<li>
<p>Review the information on this page. If any of the information is incorrect, then you can click <span class="bold">Back</span> to return to a previous page and make corrections.</p>
</li>
<li>
<p>At the bottom of this page is a warning regarding the behavior of Enterprise Manager Database Control during the patching operation. Read this warning, and then select the option <span class="bold">Select the check box to accept this warning and continue.</span> Until you select this option, the Finish button is disabled.</p>
<p>After you accept the warning option, click <span class="bold">Finish</span> to submit the job that patches the database.</p>
<p>The Deployment Procedure Manager page appears.</p>
<img width="754" height="235" src="img/patch_wizard_4.gif" alt="Description of patch_wizard_4.gif follows" title="Description of patch_wizard_4.gif follows" longdesc="img_text/patch_wizard_4.htm" /><br />
<a id="sthref788" name="sthref788" href="img_text/patch_wizard_4.htm">Description of the illustration patch_wizard_4.gif</a><br />
<br /></li>
<li>
<p>To view the progress of the recently submitted patching operation, click the link in the Run column, <span class="bold">PATCH_STANDALONE_ORACLE_DB_SYS_2009-06-19_08-13-54</span>.</p>
<p>The Procedure Completion Status page appears, which contains information about the procedure being run, the steps involved, the completion status of each step, the job details, and the OMS log for this procedure.</p>
<p>As part of the patching procedure, the database instance and Database Control are shut down and then restarted. After they have restarted, you must log in again and navigate to the Procedure Completion Status page to check the status.</p>
</li>
<li>
<p>(Optional) After you have reviewed the status of each step, you can click <span class="bold">Refresh</span> to update the display if the procedure has not yet completed. If any of the steps has a status of Failed, you can click the name of the Step, for example Stage Patches, to drill down to information explaining the cause of the failure.</p>
<p>When you have finished viewing the results, click <span class="bold">Done</span>.</p>
<p>You are returned to the Deployment Procedure Manager: Procedure Completion Status page.</p>
</li>
<li>
<p>Click the <span class="bold">Database</span> tab to return to the Database Home page.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCGAJE" name="BABCGAJE"></a><a id="ADMQS114" name="ADMQS114"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Viewing Critical Patch Advisories</h2>
<p>The Patch Advisor in Enterprise Manager describes critical software patches for your installed Oracle products. To help ensure a secure and reliable configuration, all relevant and current critical patches should be applied.</p>
<p>The Patch Advisor provides support for Remedies. When you select an advisory, you can view the calculated remedies from the context of that Advisory, and the affected Oracle homes.</p>
<p>The Patch Advisor also displays a list of available patches and patch sets for your installation, along with the name of the feature that is impacted. You can choose to display only patches for features that are used by your database, or all available patches.</p>
<a id="ADMQS12273" name="ADMQS12273"></a>
<p class="subhead2">To view the critical patch advisories and other recommended patches:</p>
<ol>
<li>
<p>Using Database Control, on the Database Home page, in the Policy Violations section, view the count for Critical Security Patches.</p>
<p>If any critical patches have not been applied to the Oracle home for the database, then this section displays the number of critical patch advisories that are relevant to the Oracle home for the database. Also, a warning icon appears corresponding to the Oracle Home link on the Database Home page is the Oracle home is missing critical patches.</p>
</li>
<li>
<p>To view a list of available critical patch advisories, click the nonzero number next to the heading Critical Security Patches. Alternatively, from the Database Home page, select the <span class="bold">Software and Support</span> subtab, then, under the heading Database Software Patching, click <span class="bold">Patch Advisor</span>.</p>
<p>The Patch Advisor page appears, listing the available critical security patches and patch recommendations by feature.</p>
<img width="657" height="289" src="img/patchadvisor.gif" alt="Description of patchadvisor.gif follows" title="Description of patchadvisor.gif follows" longdesc="img_text/patchadvisor.htm" /><br />
<a id="sthref789" name="sthref789" href="img_text/patchadvisor.htm">Description of the illustration patchadvisor.gif</a><br />
<br /></li>
<li>
<p>(Optional) In the Critical Security Patches table, click a value in the <span class="bold">Advisory</span> column to view further details for that critical security patch.</p>
</li>
<li>
<p>(Optional) To view all available patches, in the Patch Recommendations by Feature table, in the View list, select the value <span class="bold">All</span>, then click <span class="bold">Go</span>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CIHHCEHC" name="CIHHCEHC"></a><a id="ADMQS024" name="ADMQS024"></a>
<div class="sect1">
<h2 class="sect1">Upgrading a Database<a id="sthref790" name="sthref790"></a></h2>
<p>Use Database Upgrade Assistant (DBUA) to upgrade an existing database to the current release of Oracle Database.</p>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#CHDEAJIA">Overview of Database Upgrade Assistant</a></p>
</li>
<li>
<p><a href="#CHDGHCCI">Database Versions Supported by DBUA</a></p>
</li>
<li>
<p><a href="#CHDDBDHC">Starting DBUA</a></p>
</li>
<li>
<p><a href="#BABEAGDG">Upgrading a Database Using DBUA</a></p>
</li>
</ul>
<a id="CHDEAJIA" name="CHDEAJIA"></a><a id="ADMQS0241" name="ADMQS0241"></a>
<div class="sect2">
<h3 class="sect2">Overview of Database Upgrade Assistant<a id="sthref791" name="sthref791"></a></h3>
<p>Database Upgrade Assistant (DBUA) guides you through the upgrade process and configures your database for the new release. DBUA automates the upgrade process and makes appropriate recommendations for configuration options such as tablespaces and online redo log files.</p>
<p>DBUA can be used to upgrade databases created using any edition of the Oracle Database software, including Express Edition (XE) databases.</p>
<a id="ADMQS12364" name="ADMQS12364"></a>
<p class="subhead2">Pre-Upgrade Checks</p>
<p>DBUA does not begin the upgrade until it completes all of the following pre-upgrade steps:</p>
<ul>
<li>
<p>Checks for any invalid user accounts or roles</p>
</li>
<li>
<p>Checks for any invalid data types or invalid objects</p>
</li>
<li>
<p>Checks for any desupported character sets</p>
</li>
<li>
<p>Checks for adequate resources, including rollback segments, tablespaces, and free disk space</p>
</li>
<li>
<p>Checks for any missing SQL scripts needed for the upgrade</p>
</li>
<li>
<p>Backs up all necessary files (optional)</p>
</li>
</ul>
<a id="ADMQS12365" name="ADMQS12365"></a>
<p class="subhead2">Automated Upgrade Tasks</p>
<p>After completing the pre-upgrade steps, DBUA automatically performs the following tasks:</p>
<ul>
<li>
<p>Modifies or creates new required tablespaces</p>
</li>
<li>
<p>Invokes the appropriate upgrade scripts</p>
</li>
<li>
<p>Archives the online redo log files</p>
</li>
<li>
<p>Disables archiving during the upgrade phase (to improve performance)</p>
</li>
</ul>
<p>While the upgrade is running, DBUA shows the upgrade progress for each component. DBUA writes detailed trace and log files and produces a complete HTML report for later reference. To enhance security, DBUA automatically locks new user accounts in the upgraded database. DBUA then proceeds to create new configuration files (initialization parameter and listener files) in the new Oracle home.</p>
<a id="ADMQS12366" name="ADMQS12366"></a>
<p class="subhead2">Support for Oracle Real Application Clusters</p>
<p>DBUA is fully compliant with Oracle Real Application Clusters (Oracle RAC) environments. In Oracle RAC environments, DBUA upgrades all database and configuration files on all nodes in the cluster.</p>
<a id="ADMQS12367" name="ADMQS12367"></a>
<p class="subhead2">About Upgrading Oracle Automatic Storage Management</p>
<p>Oracle ASM Configuration Assistant (ASMCA) enables you to upgrade an existing Oracle ASM instance to the current software level. However, the recommended practice is to upgrade an Oracle ASM instance with Oracle Universal Installer (OUI). OUI automatically defaults to upgrade mode when it detects an Oracle ASM instance at a previous release level.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG51000" href="http://www.oracle.com/pls/db112/lookup?id=OSTMG51000"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for information about upgrading Oracle ASM</div>
<a id="ADMQS12368" name="ADMQS12368"></a>
<p class="subhead2">Support for Silent Mode</p>
<p>DBUA supports a silent mode of operation in which no user interface is presented to the user. Silent mode enables you to use a single statement for the upgrade.</p>
</div>
<!-- class="sect2" -->
<a id="CHDGHCCI" name="CHDGHCCI"></a><a id="ADMQS0242" name="ADMQS0242"></a>
<div class="sect2">
<h3 class="sect2">Database Versions Supported by DBUA<a id="sthref792" name="sthref792"></a></h3>
<p>DBUA supports the following versions of Oracle Database for upgrading to Oracle Database 11<span class="italic">g</span> Release 2 (11.2):</p>
<ul>
<li>
<p>Oracle9<span class="italic">i</span> Release 2 (9.2.0.6) and beyond</p>
</li>
<li>
<p>Oracle Database 10<span class="italic">g</span> release 1 (10.1)</p>
</li>
<li>
<p>Oracle Database 10<span class="italic">g</span> release 2 (10.2)</p>
</li>
<li>
<p>Oracle Database 11<span class="italic">g</span> release 1 (11.1)</p>
</li>
</ul>
<p>If your database version is not in this list, then you must upgrade first to the closest release listed. You can then upgrade the database to Oracle Database 11<span class="italic">g</span> release 2 (11.2).</p>
</div>
<!-- class="sect2" -->
<a id="CHDDBDHC" name="CHDDBDHC"></a><a id="ADMQS0243" name="ADMQS0243"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Starting DBUA<a id="sthref793" name="sthref793"></a></h3>
<p>If you install the Oracle Database software only and specify that you are upgrading an existing database to the new Oracle Database release, then DBUA is launched automatically after the software installation. You can then continue as described in <a href="#BABEAGDG">"Upgrading a Database Using DBUA"</a>.</p>
<p>If you perform a software-only installation and do not upgrade your database at that time, then you can do so later by launching DBUA.</p>
<p>Be aware of the following before you begin using DBUA:</p>
<ul>
<li>
<p>You must run Net Configuration Assistant (NETCA) before running DBUA.</p>
</li>
<li>
<p>It is not possible to upgrade a database with DBUA when the source and target Oracle homes are owned by different users.</p>
</li>
<li>
<p>If the database instance is not running, then DBUA tries to start the instance with the default initialization parameter file. If that fails, then you are prompted to provide the name of the correct initialization parameter file or to start the instance. If the instance is up and running, then DBUA connects to it.</p>
</li>
<li>
<p>If you stop the upgrade, but do not restore the database, then you should not restart DBUA until you start the database instance in <code>UPGRADE</code> mode using the Oracle Database 2<span class="italic">g</span> release 2 (11.2) software. You cannot go back to the original software version unless you restore your database.</p>
</li>
<li>
<p>If you restore your database manually (not using DBUA), then remove the following file from the Oracle Database 2<span class="italic">g</span> release 2 (11.2) home directory before starting DBUA:</p>
<pre xml:space="preserve" class="oac_no_warn">$ <span class="codeinlineitalic">Oracle_home</span>/cfgtoollogs/dbua/logs/Welcome_<span class="italic">SID</span>.txt
</pre>
<p>The presence of this file indicates to DBUA that this operation is a reattempt of a previous operation.</p>
</li>
</ul>
<a id="ADMQS12274" name="ADMQS12274"></a>
<p class="subhead2">To start DBUA on Microsoft Windows:</p>
<ol>
<li>
<p>Configure the operating system environment variables, as described in <a href="em_manage.htm#CACHIJDC">"Configuring the Operating System Environment Variables"</a>.</p>
</li>
<li>
<p>Click <span class="bold">Start</span>, then select <span class="bold">Programs</span> (or <span class="bold">All Programs</span>)</p>
</li>
<li>
<p>Select <span class="bold">Oracle -</span> <span class="bolditalic">HOME_NAME</span></p>
</li>
<li>
<p>Select <span class="bold">Configuration and Migration Tools</span></p>
</li>
<li>
<p>Select Database Upgrade Assistant</p>
<p>The Database Upgrade Assistant: Welcome window appears.</p>
</li>
</ol>
<a id="ADMQS12275" name="ADMQS12275"></a>
<p class="subhead2">To start DBUA on any supported platform:</p>
<ol>
<li>
<p>Open a command window.</p>
</li>
<li>
<p>Configure the operating system environment variables, as described in <a href="em_manage.htm#CACHIJDC">"Configuring the Operating System Environment Variables"</a>.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre xml:space="preserve" class="oac_no_warn">dbua
</pre>
<p>The Database Upgrade Assistant: Welcome window appears.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The <code>dbua</code> executable is typically found in your <code><span class="codeinlineitalic"><span class="italic">Oracle_home</span></span></code><code>/bin</code> directory.</div>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD003" href="http://www.oracle.com/pls/db112/lookup?id=UPGRD003"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about Database Upgrade Assistant</div>
</div>
<!-- class="sect2" -->
<a id="BABEAGDG" name="BABEAGDG"></a><a id="ADMQS0244" name="ADMQS0244"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Upgrading a Database Using DBUA<a id="sthref794" name="sthref794"></a><a id="sthref795" name="sthref795"></a><a id="sthref796" name="sthref796"></a></h3>
<p>Complete the following steps to upgrade a database using DBUA. If you need help at any window or want to consult more documentation about DBUA, then click the <span class="bold">Help</span> button to access the online Help.</p>
<a id="ADMQS12276" name="ADMQS12276"></a>
<p class="subhead2">To upgrade a database using DBUA:</p>
<ol>
<li>
<p>Start DBUA. See <a href="#CHDDBDHC">"Starting DBUA"</a>.</p>
</li>
<li>
<p>At the Welcome window of DBUA, make sure the database being upgraded meets the specified conditions. Then, click <span class="bold">Next</span>.</p>
</li>
<li>
<p>At the Databases window, select the database you want to upgrade from the Available Databases table. Then, click <span class="bold">Next</span>.</p>
<p>You can select only one database at a time. If you run DBUA from a user account that does not have <code>SYSDBA</code> privileges, then enter the user name and password credentials to enable <code>SYSDBA</code> privileges for the selected database.</p>
</li>
<li>
<p>DBUA displays a message saying it is getting database information. DBUA analyzes the selected database, performing pre-upgrade checks and displaying warnings as necessary:</p>
<ul>
<li>
<p>It checks for any online redo log files of a size less than 4 megabytes (MB). If such files are found, then DBUA gives the option to drop or create new online redo log files.</p>
</li>
<li>
<p>It checks the initialization parameter file for any obsolete or deprecated initialization parameters.</p>
</li>
</ul>
<p>If no problems are found, then the Diagnostic Destination window appears.</p>
</li>
<li>
<p>In the <span class="bold">Diagnostic Destination</span> field, do one of the following:</p>
<ul>
<li>
<p>Leave the setting at its default value, which is the Oracle base directory.</p>
</li>
<li>
<p>Enter a new destination.</p>
</li>
<li>
<p>Click <span class="bold">Browse</span> and select a new destination.</p>
</li>
</ul>
<p>Diagnostic Destination is the default location to store Oracle trace and diagnostic files. It replaces the initialization parameter settings for background dump destination, user dump destination and core dump destination from earlier Oracle Database releases.</p>
<p>Click <span class="bold">Next</span>.</p>
<p>The Move Database Files window appears.</p>
</li>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>Select <span class="bold">Do Not Move Database Files as Part of Upgrade</span>.</p>
</li>
<li>
<p>Select <span class="bold">Move Database Files During Upgrade</span>.</p>
<p>If you choose to move database files, then you must also select either File System or Oracle Automatic Storage Management (Oracle ASM).</p>
</li>
</ul>
<p>Click <span class="bold">Next</span>.</p>
<p>The Recompile Invalid Objects window appears.</p>
</li>
<li>
<p>(Optional) Select <span class="bold">Recompile invalid objects at the end of upgrade</span> and modify the value of degree of parallelism.</p>
<p>When you upgrade your database to the new Oracle Database release, many of the PL/SQL modules in the database become invalid. By default, Oracle Database recompiles invalid PL/SQL modules as they are used, but this takes time and can result in poor performance. To eliminate these performance issues, select <span class="bold">Recompile invalid objects at the end of upgrade</span>. All the invalid PL/SQL modules are be recompiled immediately after the upgrade is performed. The task of recompiling all the invalid PL/SQL modules in your database can take a significant amount of time and increase the time it takes to complete your database upgrade.</p>
<p>If you have multiple CPUs, then DBUA automatically adds a <span class="bold">Degree of Parallelism</span> menu to the Recompile Invalid Objects window. Parallel processing reduces the time it takes to recompile all the invalid PL/SQL modules in your database. DBUA automatically sets the degree of parallelism to one less than the number of available CPUs. You can select a different value from the menu.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Selecting <span class="bold">Recompile invalid objects at the end of upgrade</span> is equivalent to running the <code><span class="codeinlineitalic"><code><span class="codeinlineitalic">ORACLE_HOME</span></code></span></code><code>/rdbms/admin/utlrp.sql</code> script, which is used to recompile stored PL/SQL and Java code.</div>
<p>Click <span class="bold">Next</span>.</p>
<p>The Backup window appears.</p>
</li>
<li>
<p>Select one of the following options:</p>
<ul>
<li>
<p><span class="bold">I have already backed up my database.</span></p>
</li>
<li>
<p><span class="bold">I would like this tool to back up the database.</span></p>
<p>If you use DBUA to back up your database, then DBUA makes a copy of all database files in the directory that you specify in the <span class="bold">Backup Directory</span> field. DBUA performs this consistent backup automatically after it shuts down the database and before it begins the upgrade process. The backup does not compress the database files.</p>
<p>In the <span class="bold">Backup Directory</span> field, do one of the following:</p>
<ul>
<li>
<p>Leave the setting at its default value</p>
</li>
<li>
<p>Enter a different valid file system path. You cannot specify a raw device for the backup files.</p>
</li>
<li>
<p>Click <span class="bold">Browse</span> and select a new backup destination.</p>
</li>
</ul>
</li>
</ul>
<p>Oracle strongly recommends that you back up your database before starting the upgrade. If errors occur during the upgrade, then you may need to restore the database from the backup.</p>
<p>In addition to creating a backup of your database, DBUA creates an executable script in the directory specified in the Backup Directory field. If needed, you can use the executable script appropriate to your system to restore the database files:</p>
<ul>
<li>
<p>Microsoft Windows: <code><span class="codeinlineitalic">db_name</span></code><code>_restore.bat</code></p>
</li>
<li>
<p>Linux or UNIX systems: <code><span class="codeinlineitalic">db_name</span></code><code>_restore.sh</code></p>
</li>
</ul>
<p>Click <span class="bold">Next</span>.</p>
<p>The Recovery Configuration window appears.</p>
</li>
<li>
<p>In the <span class="bold">Fast Recovery Area</span> field, do one of the following:</p>
<ul>
<li>
<p>Leave the setting at its default value</p>
</li>
<li>
<p>Enter a different fast recovery area</p>
</li>
<li>
<p>Click <span class="bold">Browse</span> and select a different fast recovery area.</p>
</li>
</ul>
<p>The fast recovery area can be used to recover data that would otherwise be lost during a failure. This location is also used by Enterprise Manager if you have enabled local management and daily backups on the Database Control Management Options page.</p>
<p>In the <span class="bold">Fast Recovery Area Size</span> field, select the units you want from the list and do one of the following:</p>
<ul>
<li>
<p>Leave the setting at its default value.</p>
</li>
<li>
<p>Enter a different value for Fast Recovery Area Size.</p>
</li>
<li>
<p>Use the up and down arrows to set a different Fast Recovery Area Size.</p>
</li>
</ul>
<p>In the Recovery Configuration window, you specify a fast recovery area and enable archiving. It is important to configure these features for your database so you can recover your data if a failure occurs.</p>
<p>Click <span class="bold">Next</span>.</p>
<p>The Summary window appears.</p>
</li>
<li>
<p>Review the list the initialization parameters that will be set for the database during the upgrade. Click <span class="bold">Back</span> to correct any errors, or click <span class="bold">Finish</span>.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The database is not be available for general use during the upgrade process that begins when you click <span class="bold">Finish</span>.</div>
<p>A Progress window appears and DBUA begins to perform the upgrade.</p>
</li>
<li>
<p>You might encounter error messages with Ignore and Abort choices:</p>
<ul>
<li>
<p><span class="bold">Ignore</span> - Ignores the error, skips the current step, and proceeds with the upgrade. The ignored errors are logged and shown later in the summary. After the upgrade is complete, you can fix the problem, restart DBUA, and complete the skipped steps.</p>
</li>
<li>
<p><span class="bold">Abort</span> - Stops the upgrade process. DBUA prompts you to restore the database if the database backup was performed by DBUA. After the database has been restored, correct the error and restart DBUA to perform the upgrade again. If you do not restore the database, then DBUA leaves the database in its current state so that you can proceed with a manual upgrade.</p>
</li>
</ul>
<p>After the upgrade has completed, the following message is displayed:</p>
<pre xml:space="preserve" class="oac_no_warn">Upgrade is complete. Click "OK" to see the results of the upgrade.
</pre>
<p>Click <span class="bold">OK</span>.</p>
<p>The Upgrade Results window appears.</p>
</li>
<li>
<p>Examine the results of the upgrade. The upgrade results summary describes the original and upgraded databases and changes made to the initialization parameters.</p>
<p>The upgrade results also include an Upgrade Details section that describes the steps performed during the database upgrade. This section provides each step name, the log file for the step, and the status. In some cases, you can click the status to display details about the execution step. The Upgrade Details section also includes the directory where the various log files are stored after the upgrade. You can examine any of these log files to obtain more details about the upgrade process.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
An HTML version of the Upgrade Results is also saved in the log files directory.</div>
</li>
<li>
<p>Click <span class="bold">Configure Database Passwords</span>.</p>
<p>The Password Management dialog box appears.</p>
</li>
<li>
<p>The Password Management dialog box enables you to change the default password for a user after you upgrade the database.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
To prevent unauthorized use of the database, change all user passwords immediately after you upgrade your database.</div>
<p>Click the <span class="bold">Lock Account?</span> column for a user to lock or unlock an account. A check mark indicates that the account is locked.</p>
<p>Enter a new password for a user in its <span class="bold">New Password</span> column.</p>
<p>Confirm the new password by entering it in the <span class="bold">Confirm Password</span> column.</p>
<p>Click <span class="bold">OK</span> to return to the Upgrade Results window.</p>
</li>
<li>
<p>Click <span class="bold">Restore</span> if you are not satisfied with the upgrade results.</p>
<p>Depending on the method you used to back up your database, the restore operation performs one of the following tasks:</p>
<ul>
<li>
<p>If you used DBUA to back up your database, then clicking Restore copies the original database files and the original database settings from the backup.</p>
</li>
<li>
<p>If you used your own backup procedure to back up the database, then clicking Restore copies only the original database settings. To restore the database itself, copy the data files from the backup you created using your own backup utilities.</p>
</li>
</ul>
<p>Click <span class="bold">Close</span> to quit DBUA if you are satisfied with the upgrade results.</p>
<p>DBUA removes the entry of the upgraded database from the old <code>listener.ora</code> file and restarts the listener.</p>
</li>
</ol>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">If you retain the old Oracle Database software, then never start the upgraded database with it. Only start the database with the executable files in the new Oracle Database installation. Also, before you remove the old Oracle Database environment, make sure you relocate any data files in that environment to the new Oracle Database environment. See <a class="olink ADMIN11430" href="http://www.oracle.com/pls/db112/lookup?id=ADMIN11430"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about relocating data files.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD004" href="http://www.oracle.com/pls/db112/lookup?id=UPGRD004"><span class="italic">Oracle Database Upgrade Guide</span></a> for information about additional tasks that should be completed after upgrading a database</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACJFCDZ" name="CACJFCDZ"></a><a id="ADMQS113" name="ADMQS113"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing Oracle Software: Oracle By Example Series</h2>
<p>Oracle By Example (OBE) has a series on the <span class="italic">Oracle Database 2 Day DBA</span> guide. This OBE steps you through the tasks in this chapter, and includes annotated screenshots.</p>
<p>To view the Managing Oracle Software OBE, in your browser, enter the following URL:</p>
<p><code><a href="http://www.oracle.com/technology/obe/11gr2_2day_dba/managing/managing.htm">http://www.oracle.com/technology/obe/11gr2_2day_dba/managing/managing.htm</a></code></p>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="problems.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="asm.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2004, 2009,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
