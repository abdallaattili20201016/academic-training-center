<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta http-equiv="Content-Language" content="en" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta name="robots" content="all" scheme="http://www.robotstxt.org/" />
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1" />
<meta name="Date" content="2010-03-05T15:45:39Z" />
<meta name="doctitle" content="Oracle&reg; Database Platform Guide 11g Release 2 (11.2) for Microsoft Windows" />
<meta name="partno" content="E10845-01" />
<meta name="docid" content="NTQRF" />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />
<link rel="Stylesheet" href="../../dcommon/css/blafdoc.css" title="Default" type="text/css" />
<script type="text/javascript" src="../../dcommon/js/doccd.js">
</script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="ap_raw.htm" title="Previous" type="text/html" />
<link rel="Next" href="ap_error.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10845.pdf" title="PDF version" type="application/pdf" />
<title>Oracle Net Services Configuration on Windows</title>
</head>
<body>
<div class="header">
<div class="zz-skip-header"><a name="top" id="top" href="#BEGIN">Skip Headers</a></div>
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top"><b>Oracle&reg; Database Platform Guide<br />
11<i>g</i> Release 2 (11.2) for Microsoft Windows</b><br />
Part Number E10845-01</td>
<td valign="bottom" align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<tr>
<td align="left" valign="top">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="ap_raw.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="ap_error.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td align="right" valign="top" style="font-size: 90%"><a href="../e10845.pdf">View PDF</a></td>
</tr>
</table>
<a name="BEGIN" id="BEGIN"></a></div>
<div class="IND"><!-- End Header --><a id="g635916" name="g635916"></a><a id="NTQRF220" name="NTQRF220"></a>
<h1 class="appendix"><span class="secnum">C</span> Oracle Net Services Configuration on Windows</h1>
<p>This appendix describes Oracle Net Services configuration for Windows. For more generic information on Oracle Net Services configuration, see <a class="olink NETAG" href="http://www.oracle.com/pls/db112/lookup?id=NETAG"><span class="italic">Oracle Database Net Services Administrator's Guide.</span></a></p>
<p>This appendix contains these topics:</p>
<ul>
<li>
<p><a href="#BABGBAFC">Configuring Oracle Database to Communicate with ASM</a></p>
</li>
<li>
<p><a href="#i634241">Understanding Oracle Net Services Registry Parameters and Subkeys</a></p>
</li>
<li>
<p><a href="#i634284">Listener Requirements</a></p>
</li>
<li>
<p><a href="#i634295">Understanding Optional Configuration Parameters</a></p>
</li>
<li>
<p><a href="#i634347">Advanced Network Configuration</a></p>
</li>
</ul>
<a id="BABGBAFC" name="BABGBAFC"></a><a id="NTQRF508" name="NTQRF508"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring Oracle Database to Communicate with ASM</h2>
<p>Oracle Database for Windows installations that use Automatic Storage Management (ASM) must use Windows native authentication, which is enabled by default. To ensure that it is, check that the <code>sqlnet.ora</code> file, by default located in <code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\network\admin</code>, has NTS enabled. For example:</p>
<pre xml:space="preserve" class="oac_no_warn">sqlnet.authentication_services=(NTS)
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="authen.htm#CHDHFFDC">"Windows Authentication Protocols"</a></div>
</div>
<!-- class="sect1" -->
<a id="i634241" name="i634241"></a><a id="NTQRF509" name="NTQRF509"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Understanding Oracle Net Services Registry Parameters and Subkeys</h2>
<p>The registry contains entries for Oracle Net Services parameters and subkeys. To successfully add or modify Oracle Net Services configuration parameters, you must understand where they are located and the rules that apply to them.</p>
<a id="NTQRF510" name="NTQRF510"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref777" name="sthref777"></a>
<h3 class="sect2">Oracle Net Service Subkeys</h3>
<p><code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services</code> contains subkeys that correspond to services. Depending on what is installed, your Oracle Net Services consist of all or a subset of the following:</p>
<ul>
<li>
<p><a id="sthref778" name="sthref778"></a><a id="sthref779" name="sthref779"></a><code>Oracle</code><code><span class="codeinlineitalic">HOME_NAME</span></code><code>ClientCache</code></p>
</li>
<li>
<p><a id="sthref780" name="sthref780"></a><a id="sthref781" name="sthref781"></a><code>Oracle</code><code><span class="codeinlineitalic">HOME_NAME</span></code><code>CMAdmin</code></p>
</li>
<li>
<p><a id="sthref782" name="sthref782"></a><a id="sthref783" name="sthref783"></a><code>Oracle</code><code><span class="codeinlineitalic">HOME_NAME</span></code><code>CMan</code></p>
</li>
<li>
<p><a id="sthref784" name="sthref784"></a><a id="sthref785" name="sthref785"></a><code>Oracle</code><code><span class="codeinlineitalic">HOME_NAME</span></code><code>TNSListener</code></p>
</li>
</ul>
<p>Each service subkey contains the parameters shown in <a href="#g634822">Table C-1</a>.</p>
<div class="tblformal"><a id="NTQRF511" name="NTQRF511"></a><a id="sthref786" name="sthref786"></a><a id="g634822" name="g634822"></a>
<p class="titleintable">Table C-1 Service Subkey Parameters</p>
<table class="Formal" title="Service Subkey Parameters" summary="Rows are parameters. For each parameter, the first column is its name, and the second column is its purpose." dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="17%" />
<col width="*" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t3">Parameter</th>
<th align="left" valign="bottom" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t3" headers="r1c1-t3">
<p><code><a id="sthref787" name="sthref787"></a><a id="sthref788" name="sthref788"></a><a id="sthref789" name="sthref789"></a>DisplayName</code></p>
</td>
<td align="left" headers="r2c1-t3 r1c2-t3">
<p>Specifies service name.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t3" headers="r1c1-t3">
<p><code><a id="sthref790" name="sthref790"></a><a id="sthref791" name="sthref791"></a><a id="sthref792" name="sthref792"></a>ImagePath</code></p>
</td>
<td align="left" headers="r3c1-t3 r1c2-t3">
<p>Specifies fully qualified path name of the executable started by service and any command line arguments passed to executable at run time.</p>
</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t3" headers="r1c1-t3">
<p><code><a id="sthref793" name="sthref793"></a><a id="sthref794" name="sthref794"></a><a id="sthref795" name="sthref795"></a>ObjectName</code></p>
</td>
<td align="left" headers="r4c1-t3 r1c2-t3">
<p>Specifies logon user account and computer to which service should log on.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i634284" name="i634284"></a><a id="NTQRF512" name="NTQRF512"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Listener Requirements</h2>
<p>In Oracle Database 10<span class="italic">g</span> Release 1 (10.1) or later, the listener is set to start automatically at system restart. If you intend to use only the listener for all of your databases, ensure that only the Windows service for the listener, as listed in the Control Panel, is set to start automatically.</p>
<p>Oracle usually recommends that you only have a single net listener service running on a Windows computer at any one time. This single listener can support multiple databases. If you must have two different net listener services running on a Windows computer at the same time, ensure that they are configured to listen on different TCP/IP port numbers.</p>
<p>If the same IP address and port are used for different listeners, you might expect that the second and subsequent listeners would fail to bind. Instead, Windows allows them all to listen on the same IP address and port, resulting in unexpected behavior of the listeners. This is a suspected Windows operating system problem with TCP/IP and has been reported to Microsoft.</p>
</div>
<!-- class="sect1" -->
<a id="i634295" name="i634295"></a><a id="NTQRF513" name="NTQRF513"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Understanding Optional Configuration Parameters</h2>
<p>You can use the following parameters on Windows:</p>
<ul>
<li>
<p><a href="#i634314">LOCAL</a></p>
</li>
<li>
<p><a href="#i634336">TNS_ADMIN</a></p>
</li>
<li>
<p><a href="#i634341">USE_SHARED_SOCKET</a></p>
</li>
</ul>
<p>Oracle Net Service first checks for the parameters as environment variables, and uses the values defined. If environment variables are not defined, it searches for these parameters in the registry.</p>
<a id="i634314" name="i634314"></a><a id="NTQRF514" name="NTQRF514"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref796" name="sthref796"></a><a id="sthref797" name="sthref797"></a><a id="sthref798" name="sthref798"></a><a id="sthref799" name="sthref799"></a><a id="sthref800" name="sthref800"></a><a id="sthref801" name="sthref801"></a>LOCAL</h3>
<p>You can use parameter <code>LOCAL</code> to connect to Oracle Database without specifying a connect identifier in the connect string. The value of parameter <code>LOCAL</code> is any connect identifier, such as a net service name. For example, if parameter <code>LOCAL</code> is specified as <code>finance</code>, you can connect to a database from SQL*Plus with:</p>
<pre xml:space="preserve" class="oac_no_warn">SQL&gt; CONNECT SCOTT
Enter password: <span class="italic">password</span>
</pre>
<p>rather than</p>
<pre xml:space="preserve" class="oac_no_warn">SQL&gt; CONNECT SCOTT@finance
Enter password: <span class="italic">password</span>
</pre>
<p>Oracle Net checks if <code>LOCAL</code> is defined as an environment variable or as a parameter in the registry, and uses <code>finance</code> as the service name. If it exists, Oracle Net connects.</p>
</div>
<!-- class="sect2" -->
<a id="i634336" name="i634336"></a><a id="NTQRF515" name="NTQRF515"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref802" name="sthref802"></a><a id="sthref803" name="sthref803"></a><a id="sthref804" name="sthref804"></a><a id="sthref805" name="sthref805"></a>TNS_ADMIN</h3>
<p>You can add parameter <code>TNS_ADMIN</code> to change the directory path of Oracle Net Services configuration files from the default location of <code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\network\admin</code>. For example, if you set <code>TNS_ADMIN</code> to <code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\test\admin</code>, the configuration files are used from <code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>\test\admin</code>.</p>
</div>
<!-- class="sect2" -->
<a id="i634341" name="i634341"></a><a id="NTQRF516" name="NTQRF516"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref806" name="sthref806"></a><a id="sthref807" name="sthref807"></a><a id="sthref808" name="sthref808"></a><a id="sthref809" name="sthref809"></a>USE_SHARED_SOCKET</h3>
<p>You can set parameter <code>USE_SHARED_SOCKET</code> to <code>true</code> to enable use of shared sockets. If this parameter is set to <code>true</code>, the network listener passes the socket descriptor for client connections to the database thread. As a result, the client does not need to establish a new connection to the database thread and database connection time improves. Also, all database connections share the port number used by the network listener, which can be useful if you are setting up third-party proxy servers.</p>
<p>This parameter only works in dedicated server mode in a TCP/IP environment. If this parameter is set, you cannot use the Oracle database listener to spawn Oracle7 release 7<span class="italic">.x</span> databases. To spawn a dedicated server for an instance of Oracle Database not associated with the same Oracle home as the listener and have shared socket enabled, you must also set parameter <code>USE_SHARED_SOCKET</code> for both Oracle homes.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i634347" name="i634347"></a><a id="NTQRF517" name="NTQRF517"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Advanced Network Configuration</h2>
<p>The following sections describe advanced configuration procedures specifically for Oracle Net Services on Windows operating systems:</p>
<ul>
<li>
<p><a href="#i634350">Configuring Authentication Method</a></p>
</li>
<li>
<p><a href="#i634359">Configuring Security for Named Pipes Protocol</a></p>
</li>
<li>
<p><a href="#CHDHEHCH">Modifying Configuration of External Procedures for Higher Security</a></p>
</li>
</ul>
<a id="i634350" name="i634350"></a><a id="NTQRF518" name="NTQRF518"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring Authentication Method</h3>
<p>Oracle Net Services provides authentication methods for Windows operating systems using Windows Native Authentication.</p>
</div>
<!-- class="sect2" -->
<a id="i634359" name="i634359"></a><a id="NTQRF519" name="NTQRF519"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="sthref810" name="sthref810"></a><a id="sthref811" name="sthref811"></a><a id="sthref812" name="sthref812"></a><a id="sthref813" name="sthref813"></a>Configuring Security for Named Pipes Protocol</h3>
<p>The network listener service may be unable to open the Named Pipe created by Oracle Names unless service <code>Oracle</code><code><span class="codeinlineitalic">HOME_NAME</span></code><code>TNSListener</code> has a valid user ID and password associated with it.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Your operating system documentation for instructions on setting up network listener permissions</div>
</div>
<!-- class="sect2" -->
<a id="CHDHEHCH" name="CHDHEHCH"></a><a id="NTQRF520" name="NTQRF520"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Modifying Configuration of External Procedures for Higher Security</h3>
<p>This section supplements generic information provided in <a class="olink NETAG0132" href="http://www.oracle.com/pls/db112/lookup?id=NETAG0132"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> to configure a listener on Windows operating systems to exclusively handle external procedures. For a higher level of security, you are instructed to start the listener for external procedures from a user account with lower privileges than the <code>oracle</code> user. For Windows operating systems, this requires that you change the user account from LocalSystem to a local, unprivileged user for the <code>OracleHOME_NAMETNSListener</code><code><span class="codeinlineitalic">extproc_listener_name service</span></code>.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
The following instructions assume that you have performed steps 1 through 5 in the section "Modifying Configuration of External Procedures for Higher Security" in <a class="olink NETAG013" href="http://www.oracle.com/pls/db112/lookup?id=NETAG013"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a>.</div>
<p>To change the listener account:</p>
<ol>
<li>
<p>Create a new user account and grant it Log on as a Service privilege.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
Ensure that this user account does not have general access to files owned by <code>oracle</code>. Specifically, this user should not have permission to read or write to database files or to the Oracle Database server address space. In addition, this user should have read access to the <code>listener.ora</code> file, but must not have write access to it.</div>
</li>
<li>
<p>Stop service <code>OracleHOME_NAMETNSListener</code><code><span class="codeinlineitalic">extproc_listener_name</span></code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Your operating system documentation for instructions on accessing the Services dialog and stopping services</div>
<div class="infoboxnote">
<p class="notep1">Note:</p>
If the <code>OracleHOME_NAMETNSListener</code><code><span class="codeinlineitalic">extproc_listener_name</span></code> service does not exist, issue the following command from the command prompt:
<pre xml:space="preserve" class="oac_no_warn">lsnrctl start <span class="italic">extproc_listener_name</span> 
</pre>
<p>This creates the <code>OracleHOME_NAMETNSListener</code><code><span class="codeinlineitalic">extproc_listener_name</span></code> service. When you return to the list of services, stop this service before proceeding to the next step of this procedure.</p>
</div>
</li>
<li>
<p>Select <code>OracleHOME_NAMETNSListener</code><code><span class="codeinlineitalic">extproc_listener_name</span></code> service in the Services dialog and then display the properties of the service.</p>
</li>
<li>
<p>Select <span class="bold">This Account</span> and enter the username and password.</p>
</li>
<li>
<p>Start the listener by clicking <span class="bold">Start</span>. You must start the listener in this way because you cannot use the Listener Control utility to start the listener running as an unprivileged local user.</p>
<div class="infoboxnote">
<p class="notep1">Note:</p>
You can also use <code>NET START OracleHOME_NAMETNSListener</code><code><span class="codeinlineitalic">extproc_listener_name</span></code> to start the listener from the command prompt. Running the listener with lower privileges prevents you from using Listener Control utility <code>SET</code> commands to alter the configuration of this listener in file <code>listener.ora</code>. You can perform other administrative tasks on this listener with the Listener Control utility, including stopping the listener. Oracle recommends that you complete <code>listener.ora</code> file configuration before running the listener.</div>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<div class="footer">
<hr />
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="100%">
<col width="33%" />
<col width="*" />
<col width="33%" />
<tr>
<td align="left">
<table class="simple oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="98">
<tr>
<td align="center" valign="top"><a href="ap_raw.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td align="center" valign="top"><a href="ap_error.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td style="font-size: 90%" align="center" class="copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td align="right">
<table class="icons oac_no_warn" summary="" cellspacing="0" cellpadding="0" width="245">
<tr>
<td align="center" valign="top"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td align="center" valign="top"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td align="center" valign="top"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td align="center" valign="top"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td align="center" valign="top"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
